_format_version: '2.1'
_transform: true

services:

#
# The SPA calls its business handler at https://api.mycompany.com:444/api
# The gateway routes this back out to the host, to https://api.mycompany.com:445/api
#
- name: sample-api
  url: https://api.mycompany.com:445/api
  routes:
  - name: sample-api-route
    paths:
    - /api

  plugins:

  # The token handler plugin decrypts the secure cookie and forwards the access token to the API
  - name: bff-token
    config:
      encryption_key: aPdSgVkYp3s6v9y$B&E)H+MbQeThWmZq
      cookie_name_prefix: mycompany
      trusted_web_origins:
      - https://web.mycompany.com
  